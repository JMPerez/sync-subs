!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){var c=new FileReader;c.onload=function(a){b(a.target.result)},c.readAsText(a)}function d(a,b){var c=new Blob([a],{type:"text/plain"});e(c,b||"subtitle.srt")}var e=window.saveAs||(window.navigator.msSaveBlob?function(a,b){return window.navigator.msSaveBlob(a,b)}:!1)||window.webkitSaveAs||window.mozSaveAs||window.msSaveAs||function(){return window.URL=window.URL||window.webkitURL,window.URL?function(a,b){var c=URL.createObjectURL(a);if("download"in document.createElement("a")){var d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",b);var e=document.createEvent("MouseEvent");e.initMouseEvent("click",!0,!0,window,0,event.screenX,event.screenY,event.clientX,event.clientY,event.ctrlKey,event.altKey,event.shiftKey,event.metaKey,0,null),d.dispatchEvent(e)}else window.open(c,"_blank","")}:!1}(),f={read:c,save:d};b.exports=f},{}],2:[function(a){!function(){"use strict";function b(){l.addEventListener("change",d,!1);var a=new XMLHttpRequest;a.upload?(k.addEventListener("dragover",c,!1),k.addEventListener("dragleave",c,!1),k.addEventListener("drop",d,!1),k.style.display="block"):k.style.display="none",i.addEventListener("change",function(){e()},!1),j.addEventListener("click",function(){if(null!==n){var a=n,b="",c=+i.value;a.forEach(function(a){var d=f.Transform.applyTimeShift(a.subtitle,c);b+=f.Transform.toFileContents(d)}),f.File.save(b,m||"subtitle.srt")}},!1)}function c(a){a.stopPropagation(),a.preventDefault(),a.target.className="dragover"===a.type?"hover":""}function d(a){c(a),k.innerHTML="Dropped!";var b=a.target.files||a.dataTransfer.files,d=b[0];m=d.name,f.File.read(d,function(a){var b={text:a};n=f.ParserSRT(b).data,document.querySelector(".preview-section").style.display="block",e()})}function e(){if(null===n)g.innerHTML="Please, select a SRT file";else{g.innerHTML=f.Transform.toHTML(n[0].subtitle)+f.Transform.toHTML(n[1].subtitle);var a=+i.value;h.innerHTML=f.Transform.toHTML(f.Transform.applyTimeShift(n[0].subtitle,a))+f.Transform.toHTML(f.Transform.applyTimeShift(n[1].subtitle,a))}}var f={File:a("./file"),Utils:a("./utils"),Transform:a("./transform"),ParserSRT:a("./parserSRT")},g=document.getElementById("preview-orig"),h=document.getElementById("preview-after"),i=document.getElementById("time-shift"),j=document.getElementById("download"),k=document.getElementById("filedrag"),l=document.getElementById("fileselect"),m=null;document.getElementById("select-file").addEventListener("click",function(){l.click()});var n=null;window.File&&window.FileList&&window.FileReader?b():alert("Your browser does not support File"),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js",{scope:document.location.pathname}).then(function(a){console.log("Service worker was registered",a)}).catch(function(a){console.log("Service worker could not be registered",a)})}()},{"./file":1,"./parserSRT":3,"./transform":4,"./utils":5}],3:[function(a,b){function c(a,b){var c={};return c[a]=b,c}function d(a){var b=a.split(":");try{var c=b[2].split(",");return 1===c.length&&(c=b[2].split(".")),3600*parseFloat(b[0],10)+60*parseFloat(b[1],10)+parseFloat(c[0],10)+parseFloat(c[1],10)/1e3}catch(d){return 0}}function e(a){for(var b=a.length-1;b>=0&&!a[b];)b--;return b}var f=function(a){var b,f,g,h,i,j={title:"",remote:"",data:[]},k=[],l=0,m=0;for(b=a.text.split(/(?:\r\n|\r|\n)/gm),h=e(b)+1,l=0;h>l;l++){for(i={},g=[],i.id=parseInt(b[l++],10),f=b[l++].split(/[\t ]*-->[\t ]*/),i.start=d(f[0]),m=f[1].indexOf(" "),-1!==m&&(f[1]=f[1].substr(0,m)),i.end=d(f[1]);h>l&&b[l];)g.push(b[l++]);i.text=g.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),i.text=i.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i.text=i.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),i.text=i.text.replace(/\\N/gi,"<br />"),k.push(c("subtitle",i))}return j.data=k,j};b.exports=f},{}],4:[function(a,b){function c(a,b){return{id:a.id,start:a.start+b,end:a.end+b,text:a.text}}function d(a){return[a.id,f.formatTime(a.start)+"-->"+f.formatTime(a.end),a.text].join("<br/>")}function e(a){var b="";return b+=a.id+"\n",b+=f.formatTime(a.start)+" --> "+f.formatTime(a.end)+"\n",b+=a.text.replace(/<br \/>/gi,"\n")+"\n\n"}var f=a("./utils"),g={applyTimeShift:c,toHTML:d,toFileContents:e};b.exports=g},{"./utils":5}],5:[function(a,b){function c(a,b){var c=b+"";return new Array(a-c.length+1).join("0")+c}function d(a){var b=0,d=0,e=0,f=0,g=a>=0,h=Math.abs(a);return b=Math.round(1e3*(h%1)),h-=b/1e3,d=Math.round(h%60),h-=d,e=Math.round(h/60%60),h-=60*e,f=Math.round(h/3600),(g?"":"-")+c(2,f)+":"+c(2,e)+":"+c(2,d)+","+c(3,b)}var e={formatTime:d};b.exports=e},{}]},{},[2]);